1、dalay函数

- 使用

  ```js
  (async() => {
      await delay1(1000)
      console.log('输出这句')
  })
  // 传递结果
  (async() => {
      const result = await delay2(1000, { value: '我是若川' });
      console.log('输出结果', result);
  })();
  // 失败的情况
  (async() => {
      try{
          const result = await delay3(1000, { value: '我是若川', willResolve: false });
          console.log('永远不会输出这句');
      }
      catch(err){
          console.log('输出结果', err);
      }
  })();
  // 延时器的毫秒数是写死的。我们希望能够在一定时间范围内随机获取到结果。
  (async() => {
      try{
          const result = await delay4.reject(1000, { value: '我是若川', willResolve: false });
          console.log('永远不会输出这句');
      }
      catch(err){
          console.log('输出结果', err);
      }
      const result2 = await delay4.range(10, 20000, { value: '我是若川，range' });
      console.log('输出结果', result2);
  })();
  ```

- 简单版实现：

  ```js
  const delay1 = function (time) {
      new Promise((resolve, reject) => {
          setTimeOut(()=>{
              resolve()
          }, time)
      })
  }
  ```

- 如果要传递结果呢

  ```js
  const delay2 = function (time, {value} ={}) {
      new Promise((resolve, reject) => {
          setTimeOut(()=>{
              resolve(value)
          }, time)
      })
  }
  ```

- 失败的结果：

  ```js
  const delay3 = (ms, {value, willResolve} = {}) => {
      return new Promise((resolve, reject) => {
          setTimeout(() => {
              if(willResolve){
                  resolve(value);
              }
              else{
                  reject(value);
              }
          }, ms);
      });
  }
  ```

- 时间范围

  ```js
  const randomInteger = (minimum, maximum) => Math.floor((Math.random() * (maximum - minimum + 1)) + minimum);
  const createDelay = ({willResolve}) => (ms, {value} = {}) => {
      return new Promise((relove, reject) => {
          setTimeout(() => {
              if(willResolve){
                  relove(value);
              }
              else{
                  reject(value);
              }
          }, ms);
      });
  }
  
  const createWithTimers = () => {
      const delay = createDelay({willResolve: true});
      delay.reject = createDelay({willResolve: false});
      delay.range = (minimum, maximum, options) => delay(randomInteger(minimum, maximum), options);
      return delay;
  }
  const delay4 = createWithTimers();
  ```

  