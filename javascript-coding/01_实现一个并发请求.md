## 描述：

写一个函数，接受一个urls数组，以及最大的同时请求数，并返回请求所得到的结果.

```js
function request(url) {
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve(url + "done");
    }, 1000);
  });
}
function multiRequest(urls, maxNum) {
  // code here
}
```

## 实现思路：

通过Promise.all实现并发控制，再通过递归完成url的全部请求

```js
function multiRequest(urls, maxNum) {
  return new Promise((resolve) => {
    if (urls.length === 0) {
      resolve([]);
      return;
    }
    const resArr = [];
    const request = (index) => {
      if (index < urls.length) {
        const singleReq = Math.min(maxNum, urls.length - index);
        Promise.all(
          urls.slice(index, singleReq + index).map((url) => {
            return request1(url)
          })
        ).then((res) => {
          resArr.push(...res);
          request(index + singleReq);
        });
      } else {
        resolve(resArr)
      }
    };
    request(0);
  });
}
```

测试：

```js


```
